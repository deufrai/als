<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
{{ range .AlternativeOutputFormats -}}
    <link rel="{{ .Rel }}" type="{{ .MediaType.Type }}" href="{{ .Permalink | safeURL }}">
{{ end -}}

<link rel="stylesheet" href="{{ .Site.BaseURL }}css/als-main.css">
<link rel="stylesheet" href="{{ .Site.BaseURL }}css/als-doc.css">

  <script src="https://cdn.jsdelivr.net/npm/js-cookie@2.2.1/src/js.cookie.min.js" defer></script>
  <!-- Browser lang detection & cookie consent -->
  <script>
    (function() {
      'use strict';
      console.log('Language detection script executed');
      var userLang = navigator.language || navigator.userLanguage;
      console.log('Detected language:', userLang);
      userLang = userLang.substring(0, 2); // Get the first two characters (e.g., 'en', 'fr')
      var supportedLangs = ['en', 'fr'];
      if (supportedLangs.indexOf(userLang) === -1) {
        userLang = 'en'; // Default to English if the user's language is not supported
      }
      console.log('Using language:', userLang);
      // Check if the current URL already contains a language prefix
      if (!window.location.pathname.startsWith('/' + userLang + '/') && !sessionStorage.getItem('redirected')) {
        sessionStorage.setItem('redirected', 'true');
        console.log('Redirecting to:', '/' + userLang + window.location.pathname);
        window.location.href = '/' + userLang + window.location.pathname;
      }
    })();
  </script>
  <script src="/js/cookieconsent.js" defer></script>




{{ $outputFormat := partial "outputformat.html" . -}}
{{ if and hugo.IsProduction (ne $outputFormat "print") -}}
    <meta name="robots" content="index, follow">
{{ else -}}
    <meta name="robots" content="noindex, nofollow">
{{ end -}}

{{ if .Site.Params.favicon }}
  <link rel="icon" type="image/x-icon" href="{{ .Site.Params.favicon }}">
{{ end }}

<title>
    {{- if .IsHome -}}
        {{ .Site.Title -}}
    {{ else -}}
        {{ with .Title }}{{ . }} | {{ end -}}
        {{ .Site.Title -}}
    {{ end -}}
</title>
<meta name="description" content="{{ template "partials/page-description.html" . }}">
{{ template "_internal/opengraph.html" . -}}
{{ template "_internal/schema.html" . -}}
{{ template "_internal/twitter_cards.html" . -}}
{{ partialCached "head-css.html" . "head-css-cache-key" -}}
<script
        src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous"></script>
{{ if .Site.Params.offlineSearch -}}
    <script defer
            src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
            integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
            crossorigin="anonymous"></script>
{{ end -}}

{{ if .Site.Params.prism_syntax_highlighting -}}
    <link rel="stylesheet" href="{{ "css/prism.css" | relURL }}"/>
{{ end -}}

{{ template "algolia/head" . -}}

{{ partial "hooks/head-end.html" . -}}

{{/* To comply with GDPR, cookie consent scripts places in head-end must execute before Google Analytics is enabled */ -}}
{{ if hugo.IsProduction -}}
    {{ template "_internal/google_analytics.html" . -}}
{{ end -}}

{{ define "algolia/head" -}}

    {{ if and .Site.Params.search (isset .Site.Params.search "algolia") -}}
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3.6.0"
              integrity="sha512-AyDFDkYyALC5qoao077IqAOV7UC4oKCBTp+mJfjIt306AIRoBxoEZYDo0kAx/R7RbT+3EYEky1po/F1w1eQt7g=="
              crossorigin="anonymous"/>
    {{ end -}}

    {{ if ne .Site.Params.algolia_docsearch nil -}}
        {{ warnf `Config 'params.algolia_docsearch' is deprecated: use 'params.search.algolia'
      For details, see https://www.docsy.dev/docs/adding-content/search/#algolia-docsearch.` -}}
    {{ end -}}

{{ end -}}

<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://hq.wardsback.org/webstats/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->

<script src="{{ "js/download.js" | relURL }}" defer></script>



